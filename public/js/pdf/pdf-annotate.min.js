!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PDFAnnotate=t():e.PDFAnnotate=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o);t["default"]=i["default"],e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=r(o),a=n(20),u=r(a),d=n(22),s=r(d),c=n(32),l=r(c),f=n(27),p=r(f),v=n(21),h=r(v),m=n(6);t["default"]={findAnnotationAtPoint:m.findAnnotationAtPoint,findSVGContainer:m.findSVGContainer,convertToScreenPoint:m.convertToScreenPoint,StoreAdapter:i["default"],LocalStoreAdapter:u["default"],__storeAdapter:new i["default"],getStoreAdapter:function(){return this.__storeAdapter},setStoreAdapter:function(e){this.__storeAdapter=e},UI:l["default"],render:s["default"],getAnnotations:function(e,t,n){var r;return(r=this.getStoreAdapter()).getAnnotations.apply(r,arguments)},config:p["default"],uuid:h["default"]},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),u=r(a),d=n(4),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),Object.keys(n).forEach(function(e){"function"==typeof n[e]&&"function"==typeof t[e]&&(t[e]=n[e])})}return i(e,[{key:"__getAnnotations",value:function(e,t,n){(0,u["default"])("getAnnotations")}},{key:"getAnnotation",value:function(e,t){(0,u["default"])("getAnnotation")}},{key:"__addAnnotation",value:function(e,t,n,r){(0,u["default"])("addAnnotation")}},{key:"__editAnnotation",value:function(e,t,n){(0,u["default"])("editAnnotation")}},{key:"__deleteAnnotation",value:function(e,t){(0,u["default"])("deleteAnnotation")}},{key:"getComments",value:function(e,t){(0,u["default"])("getComments")}},{key:"__addComment",value:function(e,t,n){(0,u["default"])("addComment")}},{key:"__deleteComment",value:function(e,t){(0,u["default"])("deleteComment")}},{key:"getAnnotations",get:function(){return this.__getAnnotations},set:function(e){this.__getAnnotations=function(t,n,r){return e.apply(void 0,arguments).then(function(e){return e.annotations&&e.annotations.forEach(function(e){e.documentId=t}),e})}}},{key:"addAnnotation",get:function(){return this.__addAnnotation},set:function(e){this.__addAnnotation=function(t,n,r,o){return e.apply(void 0,arguments).then(function(e){return(0,d.fireEvent)("annotation:add",t,n,r,e),e})}}},{key:"editAnnotation",get:function(){return this.__editAnnotation},set:function(e){this.__editAnnotation=function(t,n,r){return e.apply(void 0,arguments).then(function(e){return(0,d.fireEvent)("annotation:edit",t,n,e),e})}}},{key:"deleteAnnotation",get:function(){return this.__deleteAnnotation},set:function(e){this.__deleteAnnotation=function(t,n,r){return e.apply(void 0,arguments).then(function(e){return e&&(0,d.fireEvent)("annotation:delete",t,n,r),e})}}},{key:"addComment",get:function(){return this.__addComment},set:function(e){this.__addComment=function(t,n,r){return e.apply(void 0,arguments).then(function(e){return(0,d.fireEvent)("comment:add",t,n,e),e})}}},{key:"deleteComment",get:function(){return this.__deleteComment},set:function(e){this.__deleteComment=function(t,n){return e.apply(void 0,arguments).then(function(e){return e&&(0,d.fireEvent)("comment:delete",t,n),e})}}}]),e}();t["default"]=s,e.exports=t["default"]},function(e,t){"use strict";function n(e){throw new Error(e+" is not implemented")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){c.emit.apply(c,arguments)}function i(){c.on.apply(c,arguments)}function a(){c.removeListener.apply(c,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.fireEvent=o,t.addEventListener=i,t.removeEventListener=a;var u=n(5),d=r(u),s=n(6),c=new d["default"],l=void 0;document.addEventListener("click",function(e){if((0,s.findSVGAtPoint)(e.clientX,e.clientY)){var t=(0,s.findAnnotationAtPoint)(e.clientX,e.clientY);l&&l!==t&&c.emit("annotation:blur",l),t&&c.emit("annotation:click",t),l=t}})},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,u,d,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),s=n.slice(),o=s.length,d=0;d<o;d++)s[d].apply(this,u);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,a,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(u=a;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){o=u;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){for(var t=e;(t=t.parentNode)&&t!==document;)if("SVG"===t.nodeName.toUpperCase()&&"true"===t.getAttribute("data-pdf-annotate-container"))return t;return null}function i(e,t){for(var n=document.querySelectorAll('svg[data-pdf-annotate-container="true"]'),r=0,o=n.length;r<o;r++){var i=n[r],a=i.getBoundingClientRect();if(u(e,t,a))return i}return null}function a(e,t){for(var n=null,r=document.elementFromPoint(e,t);!n&&r&&r!==document;){var o=r.getAttribute("data-pdf-annotate-type");o&&(n=r),r=r.parentNode}return n}function u(e,t,n){return t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right}function d(e){var t=e.getBoundingClientRect(),n=h(e),r=n.offsetLeft,o=n.offsetTop;return{top:t.top-o,left:t.left-r,right:t.right-r,bottom:t.bottom-o,width:t.width,height:t.height}}function s(e,t){var n={},r=g(e),o=r.viewport;return Object.keys(t).forEach(function(e){n[e]=t[e]*o.scale}),n}function c(e,t,n){var r=[e.x,e.y],o=[e.x+e.width,e.y+e.height];return r=l(r,t,n),o=l(o,t,n),{x:Math.min(r[0],o[0]),y:Math.min(r[1],o[1]),width:Math.abs(o[0]-r[0]),height:Math.abs(o[1]-r[1])}}function l(e,t,n){n=n||g(t).viewport;var r=[1,0,0,1,0,0];r=(0,w.scale)(r,n.scale,n.scale),r=(0,w.rotate)(r,n.rotation);var o=(0,_.getTranslation)(n);return r=(0,w.translate)(r,o.x,o.y),(0,w.applyInverseTransform)(e,r)}function f(e,t,n){n=n||g(t).viewport;var r=[1,0,0,1,0,0];r=(0,w.scale)(r,n.scale,n.scale),r=(0,w.rotate)(r,n.rotation);var o=(0,_.getTranslation)(n);return r=(0,w.translate)(r,o.x,o.y),(0,w.applyTransform)(e,r)}function p(e,t){var n={},r=g(e),o=r.viewport;return Object.keys(t).forEach(function(e){n[e]=t[e]/o.scale}),n}function v(e){for(var t=0,n=0,r=e;(r=r.parentNode)&&r!==document;)t+=r.scrollTop,n+=r.scrollLeft;return{scrollTop:t,scrollLeft:n}}function h(e){for(var t=e;(t=t.parentNode)&&t!==document&&"SVG"!==t.nodeName.toUpperCase(););var n=t.getBoundingClientRect();return{offsetLeft:n.left,offsetTop:n.top}}function m(){A.parentNode||document.head.appendChild(A)}function y(){A.parentNode&&A.parentNode.removeChild(A)}function g(e){return{documentId:e.getAttribute("data-pdf-annotate-document"),userId:e.getAttribute("data-pdf-annotate-user"),pageNumber:parseInt(e.getAttribute("data-pdf-annotate-page"),10),viewport:JSON.parse(e.getAttribute("data-pdf-annotate-viewport"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.BORDER_COLOR=void 0,t.findSVGContainer=o,t.findSVGAtPoint=i,t.findAnnotationAtPoint=a,t.pointIntersectsRect=u,t.getOffsetAnnotationRect=d,t.scaleUp=s,t.convertToSvgRect=c,t.convertToSvgPoint=l,t.convertToScreenPoint=f,t.scaleDown=p,t.getScroll=v,t.getOffset=h,t.disableUserSelect=m,t.enableUserSelect=y,t.getMetadata=g;var b=n(7),x=r(b),_=n(8),w=n(19),A=(t.BORDER_COLOR="#00BFFF",(0,x["default"])({body:{"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}}));A.setAttribute("data-pdf-annotate-user-select","true")},function(e,t){function n(e,t){return e+" {\n"+r(t)+"\n}"}function r(e){return Object.keys(e).map(function(t){return o(t,e[t])}).join("\n")}function o(e,t){return isNaN(t)||0==t||(t+="px"),i(e)+": "+t+";"}function i(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}e.exports=function(e){var t=document.createElement("style"),r=Object.keys(e).map(function(t){return n(t,e[t])}).join("\n");return t.setAttribute("type","text/css"),t.appendChild(document.createTextNode(r)),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=void 0,n=void 0;switch(e.rotation%360){case 0:t=n=0;break;case 90:t=0,n=e.width/e.scale*-1;break;case 180:t=e.width/e.scale*-1,n=e.height/e.scale*-1;break;case 270:t=e.height/e.scale*-1,n=0}return{x:t,y:n}}function i(e,t){var n=o(t);if(e.setAttribute("transform","scale("+t.scale+") rotate("+t.rotation+") translate("+n.x+", "+n.y+")"),!E&&"svg"===e.nodeName.toLowerCase()){e.setAttribute("x",parseInt(e.getAttribute("x"),10)*t.scale),e.setAttribute("y",parseInt(e.getAttribute("y"),10)*t.scale);var r=parseInt(e.getAttribute("x",10)),a=parseInt(e.getAttribute("y",10)),u=parseInt(e.getAttribute("width"),10),d=parseInt(e.getAttribute("height"),10),c=e.querySelector("path"),l=c.parentNode;switch([e,l,c,e.querySelector("rect")].forEach(function(e){e.setAttribute("width",parseInt(e.getAttribute("width"),10)*t.scale),e.setAttribute("height",parseInt(e.getAttribute("height"),10)*t.scale)}),i(c,(0,s["default"])({},t,{scale:1})),t.rotation%360){case 90:e.setAttribute("x",t.width-a-u),e.setAttribute("y",r),l.setAttribute("x",1),l.setAttribute("y",0);break;case 180:e.setAttribute("x",t.width-r-u),e.setAttribute("y",t.height-a-d),l.setAttribute("y",2);break;case 270:e.setAttribute("x",a),e.setAttribute("y",t.height-r-d),l.setAttribute("x",-1),l.setAttribute("y",0)}}return e}function a(e,t,n){n||(n=JSON.parse(e.getAttribute("data-pdf-annotate-viewport")));var r=void 0;switch(t.type){case"area":case"highlight":r=(0,y["default"])(t);break;case"circle":case"fillcircle":case"emptycircle":r=(0,_["default"])(t);break;case"strikeout":r=(0,l["default"])(t);break;case"point":r=(0,h["default"])(t);break;case"textbox":r=(0,b["default"])(t);break;case"drawing":r=(0,p["default"])(t);break;case"arrow":r=(0,A["default"])(t)}return r&&(r.setAttribute("data-pdf-annotate-id",t.uuid),r.setAttribute("data-pdf-annotate-type",t.type),r.setAttribute("data-pdf-annotate-userId",t.userId),r.setAttribute("aria-hidden",!0),e.appendChild(i(r,n))),r}function u(e,t,n){return n||(n=JSON.parse(e.getAttribute("data-pdf-annotate-viewport"))),t&&(t=i(t,n)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getTranslation=o,t.appendChild=a,t.transformChild=u;var d=n(9),s=r(d),c=n(10),l=r(c),f=n(13),p=r(f),v=n(14),h=r(v),m=n(15),y=r(m),g=n(16),b=r(g),x=n(17),_=r(x),w=n(18),A=r(w),E=/firefox/i.test(navigator.userAgent);t["default"]={getTranslation:o,appendChild:a,transformChild:u}},function(e,t){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(i){return!1}}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,u,d=n(e),s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var c in r)i.call(r,c)&&(d[c]=r[c]);if(o){u=o(r);for(var l=0;l<u.length;l++)a.call(r,u[l])&&(d[u[l]]=r[u[l]])}}return d}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return(0,a["default"])(t,{stroke:(0,d["default"])(e.color||"#f00"),strokeWidth:1}),e.rectangles.forEach(function(e){var n=document.createElementNS("http://www.w3.org/2000/svg","line");(0,a["default"])(n,{x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y}),t.appendChild(n)}),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(11),a=r(i),u=n(12),d=r(u);e.exports=t["default"]},function(e,t){"use strict";function n(e,t){Object.keys(t).forEach(function(n){e.setAttribute(i(n),t[n])})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var r=/[A-Z]/g,o=["viewBox"],i=function(e){return o.indexOf(e)===-1&&(e=e.replace(r,function(e){return"-"+e.toLowerCase()})),e};e.exports=t["default"]},function(e,t){"use strict";function n(e){return r.test(e)&&(e="#"+e),e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var r=/^([a-f0-9]{6}|[a-f0-9]{3})$/i;e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){for(var t=[],n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=0,o=e.lines.length;r<o;r++){var i=e.lines[r],u=e.lines[r+1];u&&t.push("M"+i[0]+" "+i[1]+" "+u[0]+" "+u[1])}return(0,a["default"])(n,{d:t.join(" ")+"Z",stroke:(0,d["default"])(e.color||"#000"),strokeWidth:e.width||1,fill:"none"}),n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(11),a=r(i),u=n(12),d=r(u);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","rect"),o=document.createElementNS("http://www.w3.org/2000/svg","path");return(0,a["default"])(t,{width:u,height:u,x:e.x,y:e.y}),(0,a["default"])(n,{width:u,height:u,x:0,y:.05*u*-1,viewBox:"0 0 1000 1000"}),(0,a["default"])(r,{width:u,height:u,stroke:"#000",fill:"#ff0"}),(0,a["default"])(o,{d:d,strokeWidth:50,stroke:"#000",fill:"#fff"}),n.appendChild(o),t.appendChild(r),t.appendChild(n),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(11),a=r(i),u=25,d="M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z";e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if("highlight"===e.type){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return(0,u["default"])(t,{fill:(0,s["default"])(e.color||"#ff0"),fillOpacity:.2}),e.rectangles.forEach(function(e){t.appendChild(i(e))}),t}var n=i(e);return(0,u["default"])(n,{stroke:(0,s["default"])(e.color||"#f00"),fill:"none"}),n}function i(e){var t=document.createElementNS("http://www.w3.org/2000/svg","rect");return(0,u["default"])(t,{x:e.x,y:e.y,width:e.width,height:e.height}),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(11),u=r(a),d=n(12),s=r(d);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=document.createElementNS("http://www.w3.org/2000/svg","text"),n=e.x,r=e.y;(0,a["default"])(t,{x:n,y:r,fill:(0,d["default"])(e.color||"#000"),fontSize:e.size,transform:"rotate("+e.rotation+", "+n+", "+r+")"}),t.innerHTML=e.content;var o=document.createElementNS("http://www.w3.org/2000/svg","g");return o.appendChild(t),o}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(11),a=r(i),u=n(12),d=r(u);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=i(e),n=(0,s["default"])(e.color||"#f00");return"circle"===e.type&&(0,u["default"])(t,{stroke:n,fill:"none","stroke-width":5}),"emptycircle"===e.type&&(0,u["default"])(t,{stroke:n,fill:"none","stroke-width":2}),"fillcircle"===e.type&&(0,u["default"])(t,{stroke:n,fill:n,"stroke-width":5}),t}function i(e){var t=document.createElementNS("http://www.w3.org/2000/svg","circle");return(0,u["default"])(t,{cx:e.cx,cy:e.cy,r:e.r}),t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(11),u=r(a),d=n(12),s=r(d);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=document.createElementNS("http://www.w3.org/2000/svg","polygon");if(2==e.lines.length){var n=e.lines[0],r=e.lines[e.lines.length-1],o=40,i=(0,s.makePoint)(n[0],n[1],0),u=(0,s.makePoint)(r[0],r[1],0),c=(0,s.makeVectorFromPoints)(i,u),l=(0,s.unitVector)(c);u=(0,s.addVector)(i,(0,s.multiplyVector)(l,o)),c=(0,s.makeVectorFromPoints)(i,u);var f=(0,s.makeVector)(0,0,1),p=(0,s.unitVector)((0,s.crossProduct)(l,f)),v=e.width||10,h=(0,s.addVector)(i,(0,s.multiplyVector)(p,.5*v)),m=(0,s.addVector)(h,(0,s.multiplyVector)(l,(0,s.magnitude)(c)-2*v)),y=(0,s.addVector)(m,(0,s.multiplyVector)(p,v)),g=u,b=(0,s.addVector)(i,(0,s.multiplyVector)((0,s.negateVector)(p),.5*v)),x=(0,s.addVector)(b,(0,s.multiplyVector)(l,(0,s.magnitude)(c)-2*v)),_=(0,s.addVector)(x,(0,s.multiplyVector)((0,s.negateVector)(p),v)),w=""+h.x+","+h.y+" "+m.x+","+m.y+" "+y.x+","+y.y+" "+g.x+","+g.y+" "+_.x+","+_.y+" "+x.x+","+x.y+" "+b.x+","+b.y;(0,a["default"])(t,{points:w,stroke:(0,d["default"])(e.color||"#000"),fill:(0,d["default"])(e.color||"#000")})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(11),a=r(i),u=n(12),d=r(u),s=n(19);e.exports=t["default"]},function(e,t){"use strict";function n(e,t){var n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}function r(e,t){var n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,o]}function o(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function i(e,t,n){return[e[0],e[1],e[2],e[3],e[0]*t+e[2]*n+e[4],e[1]*t+e[3]*n+e[5]]}function a(e,t){t=t*Math.PI/180;var n=Math.cos(t),r=Math.sin(t);return[e[0]*n+e[2]*r,e[1]*n+e[3]*r,e[0]*-r+e[2]*n,e[1]*-r+e[3]*n,e[4],e[5]]}function u(e,t,n){return[e[0]*t,e[1]*t,e[2]*n,e[3]*n,e[4],e[5]]}function d(e,t,n){return{x:e,y:t,z:n}}function s(e,t,n){return{xcoord:e,ycoord:t,zcoord:n}}function c(e,t){var n=t.x-e.x,r=t.y-e.y,o=t.z-e.z;return s(n,r,o)}function l(e,t){return d(e.x+t.xcoord,e.y+t.ycoord,e.z+t.zcoord)}function f(e,t){return s(e.xcoord*t,e.ycoord*t,e.zcoord*t)}function p(e){return Math.sqrt(Math.pow(e.xcoord,2)+Math.pow(e.ycoord,2)+Math.pow(e.zcoord,2))}function v(e){return f(e,-1)}function h(e){var t=p(e),n=e.xcoord/t,r=e.ycoord/t,o=e.zcoord/t;return s(n,r,o)}function m(e,t){var n=e.ycoord*t.zcoord-e.zcoord*t.ycoord,r=e.zcoord*t.xcoord-e.xcoord*t.zcoord,o=e.xcoord*t.ycoord-e.ycoord*t.xcoord;return s(n,r,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.applyTransform=n,t.applyInverseTransform=r,t.transform=o,t.translate=i,t.rotate=a,t.scale=u,t.makePoint=d,t.makeVector=s,t.makeVectorFromPoints=c,t.addVector=l,t.multiplyVector=f,t.magnitude=p,t.negateVector=v,t.unitVector=h,t.crossProduct=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(){for(var e=[],t=0;t<localStorage.length;t++)localStorage.key(t).includes("annotations")&&e.push.apply(e,o(JSON.parse(localStorage.getItem(localStorage.key(t)))));return e}function s(e,t){return JSON.parse(localStorage.getItem(e+"/"+t+"/annotations"))||[]}function c(e,t,n){localStorage.setItem(e+"/"+t+"/annotations",JSON.stringify(n))}function l(e,t,n){for(var r=-1,o=s(e,t),i=0,a=o.length;i<a;i++)if(o[i].uuid===n){r=i;break}return r}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(21),v=r(p),h=n(2),m=r(h),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user";i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{getAnnotations:function(e,t,n){return new Promise(function(r,o){var i=d().filter(function(e){return e.page===n&&"Annotation"===e["class"]});r({documentId:e,userId:t,pageNumber:n,annotations:i})})},getAnnotation:function(t,n){return Promise.resolve(s(t,e)[l(t,e,n)])},addAnnotation:function(e,t,n,r){return new Promise(function(o,i){r["class"]="Annotation",r.uuid=(0,v["default"])(),r.page=n,r.userId=t;var a=s(e,t);a.push(r),c(e,t,a),o(r)})},editAnnotation:function(e,t,n,r){return new Promise(function(o,i){var a=s(e,t);a[l(e,t,n)]=r,c(e,t,a),o(r)})},deleteAnnotation:function(e,t,n){return new Promise(function(r,o){var i=l(e,t,n);if(i>-1){var a=s(e,t);a.splice(i,1),c(e,t,a)}r(!0)})},getComments:function(e,t,n){return new Promise(function(r,o){r(s(e,t).filter(function(e){return"Comment"===e["class"]&&e.annotation===n}))})},addComment:function(e,t,n,r){return new Promise(function(o,i){var a={"class":"Comment",uuid:(0,v["default"])(),annotation:n,content:r},u=s(e,t);u.push(a),c(e,t,u),o(a)})},deleteComment:function(e,t,n){return new Promise(function(r,o){s(e,t);for(var i=-1,a=s(e,t),u=0,d=a.length;u<d;u++)if(a[u].uuid===n){i=u;break}i>-1&&(a.splice(i,1),c(e,t,a)),r(!0)})}}));return n._userId=e,n}return u(t,e),f(t,[{key:"userId",get:function(){return this._userId}}]),t}(m["default"]);t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";function n(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}function r(){return i.replace(o,n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=/[xy]/g,i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return new Promise(function(r,o){return e.setAttribute("data-pdf-annotate-container",!0),e.setAttribute("data-pdf-annotate-viewport",JSON.stringify(t)),e.removeAttribute("data-pdf-annotate-document"),e.removeAttribute("data-pdf-annotate-page"),n?(e.setAttribute("data-pdf-annotate-document",n.documentId),e.setAttribute("data-pdf-annotate-user",n.userId),e.setAttribute("data-pdf-annotate-page",n.pageNumber),Array.isArray(n.annotations)&&0!==n.annotations.length?(n.annotations.forEach(function(n){var r=e.querySelector('[data-pdf-annotate-id="'+n.uuid+'"]');r?(0,a.transformChild)(e,r,t):(0,a.appendChild)(e,n,t)}),void r(e)):r(e)):(e.innerHTML="",r(e))})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(1),a=(r(i),n(8)),u=n(23);r(u);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){e=Array.isArray(e)?e:[],Object.keys(f).forEach(function(t){var n=f[t];e.filter(function(e){return e.type===t}).sort(n).forEach(function(e,t){return(0,s["default"])(e,t+1)})})}function i(e,t){return e.y<t.y?e.x-t.x:1}function a(e,t){return i(e.rectangles[0],t.rectangles[0])}function u(e,t){var n=e.lines[0],r=t.lines[0];return i({x:n[0],y:n[1]},{x:r[0],y:r[1]})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var d=n(24),s=r(d),c=n(31),l=r(c);(0,l["default"])();var f={highlight:a,strikeout:a,drawing:u,textbox:i,point:i,area:i};e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e.type){case"highlight":case"strikeout":var n=e.rectangles,r=n[0],o=n[n.length-1];(0,c["default"])((0,a["default"])("Begin "+e.type+" annotation "+t,e.uuid),r.x,r.y,e.page,!0),(0,c["default"])((0,a["default"])("End "+e.type+" annotation "+t,e.uuid+"-end"),o.x+o.width,o.y,e.page,!1);break;case"textbox":case"point":var i="textbox"===e.type?" (content: "+e.content+")":"";(0,d["default"])((0,a["default"])(e.type+" annotation "+t+i,e.uuid),e.x,e.y,e.page);break;case"drawing":case"area":var u="undefined"!=typeof e.x?e.x:e.lines[0][0],s="undefined"!=typeof e.y?e.y:e.lines[0][1];(0,d["default"])((0,a["default"])("Unlabeled drawing",e.uuid),u,s,e.page);break;case"circle":case"fillcircle":case"emptycircle":var l="undefined"!=typeof e.cx?e.cx:e.lines[0][0],v="undefined"!=typeof e.cy?e.cy:e.lines[0][1];(0,d["default"])((0,a["default"])("Unlabeled drawing",e.uuid),l,v,e.page)}p.includes(e.type)&&(0,f["default"])(e.documentId,e.uuid)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(25),a=r(i),u=n(26),d=r(u),s=n(28),c=r(s),l=n(29),f=r(l),p=["highlight","point","area","circle","emptycircle","fillcircle"];e.exports=t["default"]},function(e,t){"use strict";function n(e,t){var n=document.createElement("div"),r=document.createTextNode(e);return n.appendChild(r),n.setAttribute("id","pdf-annotate-screenreader-"+t),n.style.position="absolute",n.style.left="-10000px",n.style.top="auto",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r){if((0,s["default"])(e,t,n,r,!0))return!0;var i=document.querySelector('svg[data-pdf-annotate-page="'+r+'"]'),a=i.getBoundingClientRect(),d=[].concat(o(i.parentNode.querySelectorAll(u["default"].textClassQuery()+" > div")));n=(0,c.scaleUp)(i,{y:n}).y+a.top,t=(0,c.scaleUp)(i,{x:t}).x+a.left;for(var l=0,f=d.length;l<f;l++){var p=d[l],v=p.getBoundingClientRect();if(n<=v.top)return p.parentNode.insertBefore(e,p),!0}var h=i.parentNode.querySelector(u["default"].textClassQuery());if(h){var m=h.getBoundingClientRect();if((0,c.pointIntersectsRect)(t,n,m))return h.appendChild(e),!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var a=n(27),u=r(a),d=n(28),s=r(d),c=n(6);e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={annotationLayerName:"annotationLayer",textLayerName:"textLayer",annotationSvgQuery:function(){return"svg."+this.annotationLayerName},annotationClassQuery:function(){return"."+this.annotationLayerName},textClassQuery:function(){return"."+this.textLayerName}},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r,o){var i=2;t=Math.max(t+i*(o?1:-1),0);var u=a(t,n+i,r);if(!u)return!1;t+=i*(o?-1:1);var d=document.querySelector('svg[data-pdf-annotate-page="'+r+'"]'),c=(0,s.scaleDown)(d,{left:u.getBoundingClientRect().left}).left-d.getBoundingClientRect().left,l=u.cloneNode(!0),f=l.innerHTML.split(""),p=[];for(l.style.position="absolute",l.style.top="-10000px",l.style.left="-10000px",document.body.appendChild(l);f.length;){if(">"===f[f.length-1])for(;f.length&&(p.unshift(f.pop()),"<"!==p[0]););l.innerHTML=f.join("");var v=(0,s.scaleDown)(d,{width:l.getBoundingClientRect().width}).width;if(c+v<=t)break;p.unshift(f.pop())}return u.innerHTML=f.join("")+e.outerHTML+p.join(""),l.parentNode.removeChild(l),!0}function a(e,t,n){var r=document.querySelector('svg[data-pdf-annotate-page="'+n+'"]'),i=r.getBoundingClientRect();return t=(0,s.scaleUp)(r,{y:t}).y+i.top,e=(0,s.scaleUp)(r,{x:e}).x+i.left,[].concat(o(r.parentNode.querySelectorAll(d["default"].textClassQuery()+" [data-canvas-width]"))).filter(function(n){return(0,s.pointIntersectsRect)(e,t,n.getBoundingClientRect())})[0]}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var u=n(27),d=r(u),s=n(6);e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=void 0;return r=Array.isArray(n)?Promise.resolve(n):a["default"].getStoreAdapter().getComments(e,t),r.then(function(e){var n=document.getElementById("pdf-annotate-screenreader-"+t);if(n){var r=document.createElement("ol");r.setAttribute("id","pdf-annotate-screenreader-comment-list-"+t),r.setAttribute("aria-label","Comments"),n.appendChild(r),e.forEach(d["default"])}})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(1),a=r(i),u=n(30),d=r(u);e.exports=t["default"]},function(e,t){"use strict";function n(e){if(e){var t=document.querySelector("#pdf-annotate-screenreader-"+e.annotation+" ol");if(t){var n=document.createElement("li");n.setAttribute("id","pdf-annotate-screenreader-comment-"+e.uuid),n.appendChild(document.createTextNode(""+e.content)),t.appendChild(n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){(0,y.addEventListener)("annotation:add",function(e,t,n,r){i(e,t,n,r.type)}),(0,y.addEventListener)("annotation:edit",function(e,t,n,r){i(e,t,r.page,r.type)}),(0,y.addEventListener)("annotation:delete",a),(0,y.addEventListener)("comment:add",u),(0,y.addEventListener)("comment:delete",d)}function i(e,t,n,r){b["default"].getStoreAdapter().getAnnotations(e,t,n).then(function(e){return e.annotations.filter(function(e){return e.type===r})}).then(function(t){return t.forEach(function(t){a(e,t.uuid)}),t}).then(f["default"])}function a(e,t){s("pdf-annotate-screenreader-"+t),s("pdf-annotate-screenreader-"+t+"-end")}function u(e,t,n){var r=document.querySelector("pdf-annotate-screenreader-comment-list-"+t),o=void 0;o=r?Promise.resolve(!0):(0,m["default"])(e,t,[]).then(function(){return r=document.querySelector("pdf-annotate-screenreader-comment-list-"+t),!0}),o.then(function(){(0,v["default"])(n)})}function d(e,t){s("pdf-annotate-screenreader-comment-"+t)}function s(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var c=n(24),l=(r(c),n(23)),f=r(l),p=n(30),v=r(p),h=n(29),m=r(h),y=n(4),g=n(1),b=r(g);e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(33),i=n(34),a=n(35),u=n(36),d=n(37),s=n(38),c=n(39),l=n(40),f=n(41);t["default"]={addEventListener:r.addEventListener,removeEventListener:r.removeEventListener,fireEvent:r.fireEvent,disableEdit:o.disableEdit,enableEdit:o.enableEdit,disablePen:i.disablePen,enablePen:i.enablePen,setPen:i.setPen,enableEraser:a.enableEraser,disableEraser:a.disableEraser,disablePoint:d.disablePoint,enablePoint:d.enablePoint,disableRect:s.disableRect,enableRect:s.enableRect,disableCircle:c.disableCircle,enableCircle:c.enableCircle,setCircle:c.setCircle,addCircle:c.addCircle,disableArrow:u.disableArrow,enableArrow:u.enableArrow,setArrow:u.setArrow,disableText:l.disableText,enableText:l.enableText,setText:l.setText,createPage:f.createPage,renderPage:f.renderPage},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){a(),C=document.createElement("div");var t=document.createElement("a"),n=(0,A.findSVGContainer)(e).parentNode,r=e.getAttribute("data-pdf-annotate-id"),o=(0,A.getOffsetAnnotationRect)(e),i=o.left-O,l=o.top-O;C.setAttribute("id","pdf-annotate-edit-overlay"),C.setAttribute("data-target-id",r),C.style.boxSizing="content-box",C.style.position="absolute",C.style.top=l+"px",C.style.left=i+"px",C.style.width=o.width+"px",C.style.height=o.height+"px",C.style.border=O+"px solid "+A.BORDER_COLOR,C.style.borderRadius=O+"px",C.style.zIndex=20100,t.innerHTML="×",t.setAttribute("href","javascript://"),t.style.background="#fff",t.style.borderRadius="20px",t.style.border="1px solid #bbb",t.style.color="#bbb",t.style.fontSize="16px",t.style.padding="2px",t.style.textAlign="center",t.style.textDecoration="none",t.style.position="absolute",t.style.top="-13px",t.style.right="-13px",t.style.width="25px",t.style.height="25px",C.appendChild(t),n.appendChild(C),document.addEventListener("click",d),document.addEventListener("keyup",s),document.addEventListener("mousedown",c),t.addEventListener("click",u),t.addEventListener("mouseover",function(){t.style.color="#35A4DC",t.style.borderColor="#999",t.style.boxShadow="0 1px 1px #ccc"}),t.addEventListener("mouseout",function(){t.style.color="#bbb",t.style.borderColor="#bbb",t.style.boxShadow=""}),C.addEventListener("mouseover",function(){L||(t.style.display="")}),C.addEventListener("mouseout",function(){t.style.display="none"})}function a(){C&&(C.parentNode.removeChild(C),C=null),document.removeEventListener("click",d),document.removeEventListener("keyup",s),document.removeEventListener("mousedown",c),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",f),(0,A.enableUserSelect)()}function u(){if(C){var e=C.getAttribute("data-target-id"),t=document.querySelectorAll('[data-pdf-annotate-id="'+e+'"]'),n=C.parentNode.querySelector(x["default"].annotationSvgQuery()),r=(0,A.getMetadata)(n),i=r.documentId;[].concat(o(t)).forEach(function(e){e.parentNode.removeChild(e)}),g["default"].getStoreAdapter().deleteAnnotation(i,e),a()}}function d(e){if((0,A.findSVGAtPoint)(e.clientX,e.clientY)){var t=document.getElementById("pdf-annotate-edit-overlay");if(t){if(L||e.target===t)return;a()}}}function s(e){C&&46===e.keyCode&&"textarea"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase()&&u()}function c(e){if(e.target===C){var t=C.getAttribute("data-target-id"),n=document.querySelector('[data-pdf-annotate-id="'+t+'"]'),r=n.getAttribute("data-pdf-annotate-type");"highlight"!==r&&"strikeout"!==r&&(L=!0,S=e.clientX,P=e.clientY,k=C.offsetLeft,M=C.offsetTop,C.style.background="rgba(255, 255, 255, 0.7)",C.style.cursor="move",C.querySelector("a").style.display="none",document.addEventListener("mousemove",l),document.addEventListener("mouseup",f),(0,A.disableUserSelect)())}}function l(e){var t=(C.getAttribute("data-target-id"),C.parentNode),n=t.getBoundingClientRect(),r=M+(e.clientY-P),o=k+(e.clientX-S),i=0,a=n.height,u=0,d=n.width;r>i&&r+C.offsetHeight<a&&(C.style.top=r+"px"),o>u&&o+C.offsetWidth<d&&(C.style.left=o+"px")}function f(e){var t=C.getAttribute("data-target-id"),n=document.querySelectorAll('[data-pdf-annotate-id="'+t+'"]'),r=n[0].getAttribute("data-pdf-annotate-type"),i=C.parentNode.querySelector(x["default"].annotationSvgQuery()),a=(0,A.getMetadata)(i),u=a.documentId,d=a.userId;C.querySelector("a").style.display="",g["default"].getStoreAdapter().getAnnotation(u,d,t).then(function(e){var a="x",d="y";if(["circle","fillcircle","emptycircle"].indexOf(r)>-1&&(a="cx",d="cy"),["area","highlight","point","textbox","circle","fillcircle","emptycircle"].indexOf(r)>-1){var s=(0,A.convertToSvgPoint)([k,M],i),c=(0,A.convertToSvgPoint)([C.offsetLeft,C.offsetTop],i),l={x:c[0]-s[0],y:c[1]-s[1]};"textbox"===r&&(n=[n[0].firstChild]),[].concat(o(n)).forEach(function(t,n){var o=parseInt(t.getAttribute(a),10),u=parseInt(t.getAttribute(d),10);if(0!==l.y){u+=l.y;var s=u;"point"===r&&(s=(0,A.scaleUp)(i,{viewY:s}).viewY),t.setAttribute(d,s),e.rectangles&&n<e.rectangles.length?e.rectangles[n].y=u:e[d]&&(e[d]=u)}if(0!==l.x){o+=l.x;var c=o;"point"===r&&(c=(0,A.scaleUp)(i,{viewX:c}).viewX),t.setAttribute(a,c),e.rectangles&&n<e.rectangles.length?e.rectangles[n].x=o:e[a]&&(e[a]=o)}})}else if("drawing"===r||"arrow"===r){var f=(0,A.convertToSvgPoint)([k,M],i),p=(0,A.convertToSvgPoint)([C.offsetLeft,C.offsetTop],i),v={x:p[0]-f[0],y:p[1]-f[1]};e.lines.forEach(function(t,n){var r=m(e.lines[n],2),o=r[0],i=r[1];e.lines[n][0]=o+v.x,e.lines[n][1]=i+v.y}),n[0].parentNode.removeChild(n[0]),(0,_.appendChild)(i,e)}g["default"].getStoreAdapter().editAnnotation(u,t,e)}),setTimeout(function(){L=!1},0),C.style.background="",C.style.cursor="",document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",f),(0,A.enableUserSelect)()}function p(e){i(e)}function v(){E||(E=!0,(0,w.addEventListener)("annotation:click",p))}function h(){a(),E&&(E=!1,(0,w.removeEventListener)("annotation:click",p))}Object.defineProperty(t,"__esModule",{value:!0});var m=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(d){o=!0,i=d}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.enableEdit=v,t.disableEdit=h;var y=n(1),g=r(y),b=n(27),x=r(b),_=n(8),w=n(4),A=n(6),E=!1,L=!1,C=void 0,S=void 0,P=void 0,k=void 0,M=void 0,O=3},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){e.preventDefault(),A=null,E=[],x=!0}function i(e){u(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}function a(e){u(e.clientX,e.clientY)}function u(e,t){x=!1;var n=void 0;if(E.length>1&&(n=(0,g.findSVGAtPoint)(e,t))){var r=(0,g.getMetadata)(n),o=r.documentId,i=r.userId,a=r.pageNumber;m["default"].getStoreAdapter().addAnnotation(o,i,a,{type:"drawing",width:_,color:w,lines:E}).then(function(e){A&&n.removeChild(A),(0,y.appendChild)(n,e)})}}function d(e){e.srcElement.classList.contains("annotationLayer")&&x&&l(e.clientX,e.clientY)}function s(e){e.srcElement.classList.contains("annotationLayer")&&x&&l(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}function c(e){27===e.keyCode&&(E=null,A.parentNode.removeChild(A),document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",a))}function l(e,t){var n=(0,g.findSVGAtPoint)(e,t);if(n){var r=n.getBoundingClientRect(),o=(0,g.convertToSvgPoint)([e-r.left,t-r.top],n);o[0]=o[0].toFixed(2),o[1]=o[1].toFixed(2),E.push(o),E.length<=1||(A&&n.removeChild(A),A=(0,y.appendChild)(n,{type:"drawing",color:w,width:_,lines:E}))}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";_=parseInt(e,10),w=t}function p(){b||(b=!0,L?(document.addEventListener("pointerdown",o),document.addEventListener("pointermove",d),document.addEventListener("pointerup",a)):(document.addEventListener("touchstart",o),document.addEventListener("touchmove",s),document.addEventListener("touchend",i),document.addEventListener("mousedown",o),document.addEventListener("mousemove",d),document.addEventListener("mouseup",a)),document.addEventListener("keyup",c),(0,g.disableUserSelect)())}function v(){b&&(b=!1,L?(document.removeEventListener("pointerdown",o),document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",a)):(document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i),document.removeEventListener("mousedown",o),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",a)),document.removeEventListener("keyup",c),(0,g.enableUserSelect)())}Object.defineProperty(t,"__esModule",{value:!0}),t.setPen=f,t.enablePen=p,t.disablePen=v;var h=n(1),m=r(h),y=n(8),g=n(6),b=!1,x=!1,_=void 0,w=void 0,A=void 0,E=[],L=/firefox/i.test(navigator.userAgent)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){m=!0}function a(e){m=!1}function u(e){s((0,h.findAnnotationAtPoint)(e.changedTouches[0].clientX,e.changedTouches[0].clientY))}function d(e){s((0,h.findAnnotationAtPoint)(e.clientX,e.clientY))}function s(e){if(m&&e&&e.getAttribute("data-pdf-annotate-userId")==y){var t=(0,h.getMetadata)(e.parentElement),n=t.documentId,r=e.getAttribute("data-pdf-annotate-id"),i=document.querySelectorAll('[data-pdf-annotate-id="'+r+'"]');[].concat(o(i)).forEach(function(e){e.parentNode.removeChild(e)}),p["default"].getStoreAdapter().deleteAnnotation(n,y,r)}}function c(){y=p["default"].getStoreAdapter().userId,document.addEventListener("mousemove",d),document.addEventListener("mousedown",i),document.addEventListener("mouseup",a),document.addEventListener("touchstart",i),document.addEventListener("touchmove",u),document.addEventListener("touchend",a)}function l(){document.removeEventListener("mousemove",d),document.removeEventListener("mousedown",i),document.removeEventListener("mouseup",a),document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",a)}Object.defineProperty(t,"__esModule",{value:!0}),t.enableEraser=c,t.disableEraser=l;var f=n(1),p=r(f),v=n(27),h=(r(v),n(6)),m=!1,y="user"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=(0,h.findAnnotationAtPoint)(e.clientX,e.clientY);if(null!==t){var n=t.getAttribute("data-pdf-annotate-type");if("circle"===n||"fillcircle"===n||"emptycircle"===n){var r=(0,h.findSVGContainer)(t),o=(0,h.getMetadata)(r),u=o.documentId,d=o.userId,s=t.getAttribute("data-pdf-annotate-id");p["default"].getStoreAdapter().getAnnotation(u,d,s).then(function(e){if(e){b=null,x=[];var t=(0,h.convertToScreenPoint)([e.cx,e.cy],r),n=r.getBoundingClientRect();w=t[0]+n.left,_=t[1]+n.top,document.addEventListener("mousemove",a),document.addEventListener("mouseup",i)}})}}}function i(e){var t=void 0;if(x.length>1&&(t=(0,h.findSVGAtPoint)(e.clientX,e.clientY))){var n=(0,h.getMetadata)(t),r=n.documentId,o=n.pageNumber;p["default"].getStoreAdapter().addAnnotation(r,o,{type:"arrow",width:y,color:g,lines:x}).then(function(e){b&&t.removeChild(b),(0,v.appendChild)(t,e)})}document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",i)}function a(e){var t=0===x.length?w:e.clientX,n=0===x.length?_:e.clientY;d(t,n)}function u(e){27===e.keyCode&&(x=null,b.parentNode.removeChild(b),
document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",i))}function d(e,t){var n=(0,h.findSVGAtPoint)(e,t);if(n){var r=n.getBoundingClientRect(),o=(0,h.convertToSvgPoint)([e-r.left,t-r.top],n);if(x.length<2)return void x.push(o);x[1]=o,b&&n.removeChild(b),b=(0,v.appendChild)(n,{type:"arrow",color:g,width:y,lines:x})}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0000FF";y=parseInt(e,10),g=t}function c(){m||(m=!0,document.addEventListener("mousedown",o),document.addEventListener("keyup",u),(0,h.disableUserSelect)())}function l(){m&&(m=!1,document.removeEventListener("mousedown",o),document.removeEventListener("keyup",u),(0,h.enableUserSelect)())}Object.defineProperty(t,"__esModule",{value:!0}),t.setArrow=s,t.enableArrow=c,t.disableArrow=l;var f=n(1),p=r(f),v=n(8),h=n(6),m=!1,y=void 0,g=void 0,b=void 0,x=void 0,_=void 0,w=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){!m&&(0,v.findSVGAtPoint)(e.clientX,e.clientY)&&(m=document.createElement("input"),m.setAttribute("id","pdf-annotate-point-input"),m.setAttribute("placeholder","Enter comment"),m.style.border="3px solid "+v.BORDER_COLOR,m.style.borderRadius="3px",m.style.position="absolute",m.style.top=e.clientY+"px",m.style.left=e.clientX+"px",m.addEventListener("blur",i),m.addEventListener("keyup",a),document.body.appendChild(m),m.focus())}function i(){u()}function a(e){27===e.keyCode?d():13===e.keyCode&&u()}function u(){if(m.value.trim().length>0){var e=parseInt(m.style.left,10),t=parseInt(m.style.top,10),n=m.value.trim(),r=(0,v.findSVGAtPoint)(e,t);if(!r)return;var o=r.getBoundingClientRect(),i=(0,v.getMetadata)(r),a=i.documentId,u=i.userId,s=i.pageNumber,c=Object.assign({type:"point"},(0,v.scaleDown)(r,{x:e-o.left,y:t-o.top}));f["default"].getStoreAdapter().addAnnotation(a,u,s,c).then(function(e){f["default"].getStoreAdapter().addComment(a,e.uuid,n),(0,p.appendChild)(r,e)})}d()}function d(){m.removeEventListener("blur",i),m.removeEventListener("keyup",a),document.body.removeChild(m),m=null}function s(){h||(h=!0,document.addEventListener("mouseup",o))}function c(){h&&(h=!1,document.removeEventListener("mouseup",o))}Object.defineProperty(t,"__esModule",{value:!0}),t.enablePoint=s,t.disablePoint=c;var l=n(1),f=r(l),p=n(8),v=n(6),h=!1,m=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){try{var e=window.getSelection(),t=e.getRangeAt(0),n=t.getClientRects();if(n.length>0&&n[0].width>0&&n[0].height>0)return n}catch(r){}return null}function a(e){var t=void 0;if("area"===x&&(t=(0,g.findSVGAtPoint)(e.clientX,e.clientY))){var n=t.getBoundingClientRect();w=e.clientY,A=e.clientX,_=document.createElement("div"),_.style.position="absolute",_.style.top=w-n.top+"px",_.style.left=A-n.left+"px",_.style.border="3px solid "+g.BORDER_COLOR,_.style.borderRadius="3px",t.parentNode.appendChild(_),document.addEventListener("mousemove",u),(0,g.disableUserSelect)()}}function u(e){var t=_.parentNode.querySelector(m["default"].annotationSvgQuery()),n=t.getBoundingClientRect();A+(e.clientX-A)<n.right&&(_.style.width=e.clientX-A+"px"),w+(e.clientY-w)<n.bottom&&(_.style.height=e.clientY-w+"px")}function d(e){var t=void 0;if("area"!==x&&(t=i())){(0,g.findSVGAtPoint)(t[0].left,t[0].top);c(x,[].concat(o(t)).map(function(e){return{top:e.top,left:e.left,width:e.width,height:e.height}}))}else if("area"===x&&_){var n=_.parentNode.querySelector(m["default"].annotationSvgQuery()),r=n.getBoundingClientRect();c(x,[{top:parseInt(_.style.top,10)+r.top,left:parseInt(_.style.left,10)+r.left,width:parseInt(_.style.width,10),height:parseInt(_.style.height,10)}]),_.parentNode.removeChild(_),_=null,document.removeEventListener("mousemove",u),(0,g.enableUserSelect)()}}function s(e){if(27===e.keyCode){var t=window.getSelection();t.removeAllRanges(),_&&_.parentNode&&(_.parentNode.removeChild(_),_=null,document.removeEventListener("mousemove",u))}}function c(e,t,n){var r=(0,g.findSVGAtPoint)(t[0].left,t[0].top),i=void 0;if(r){var a=r.getBoundingClientRect();if(n||("highlight"===e?n="FFFF00":"strikeout"===e&&(n="FF0000")),i={type:e,color:n,rectangles:[].concat(o(t)).map(function(t){var n=0;return"strikeout"===e&&(n=t.height/2),(0,g.convertToSvgRect)({y:t.top+n-a.top,x:t.left-a.left,width:t.width,height:t.height},r)}).filter(function(e){return e.width>0&&e.height>0&&e.x>-1&&e.y>-1})},0!==i.rectangles.length){if("area"===e){var u=i.rectangles[0];delete i.rectangles,i.x=u.x,i.y=u.y,i.width=u.width,i.height=u.height}var d=(0,g.getMetadata)(r),s=d.documentId,c=d.userId,l=d.pageNumber;v["default"].getStoreAdapter().addAnnotation(s,c,l,i).then(function(e){(0,y.appendChild)(r,e)})}}}function l(e){x=e,b||(b=!0,document.addEventListener("mouseup",d),document.addEventListener("mousedown",a),document.addEventListener("keyup",s))}function f(){b&&(b=!1,document.removeEventListener("mouseup",d),document.removeEventListener("mousedown",a),document.removeEventListener("keyup",s))}Object.defineProperty(t,"__esModule",{value:!0}),t.enableRect=l,t.disableRect=f;var p=n(1),v=r(p),h=n(27),m=r(h),y=n(8),g=n(6),b=!1,x=void 0,_=void 0,w=void 0,A=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0000FF";y=parseInt(e,10),g=t}function i(e){var t=(0,v.findSVGAtPoint)(e.clientX,e.clientY);if(t){var n=t.getBoundingClientRect();a(t,m,{x:e.clientX-n.left,y:e.clientY-n.top},y,g)}}function a(e,t,n,r,o){var i=(0,v.convertToSvgPoint)([n.x,n.y],e),a={type:t,color:o,cx:i[0],cy:i[1],r:r},u=(0,v.getMetadata)(e),d=u.documentId,s=u.userId,c=u.pageNumber;l["default"].getStoreAdapter().addAnnotation(d,s,c,a).then(function(t){(0,p.appendChild)(e,t)})}function u(e){m=e,h||(h=!0,document.addEventListener("mouseup",i))}function d(){h&&(h=!1,document.removeEventListener("mouseup",i))}function s(e,t){var n=m;m=e,i(t),m=n}Object.defineProperty(t,"__esModule",{value:!0}),t.setCircle=o,t.enableCircle=u,t.disableCircle=d,t.addCircle=s;var c=n(1),l=r(c),f=n(27),p=(r(f),n(8)),v=n(6),h=!1,m=void 0,y=10,g="0000FF"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){!y&&(0,h.findSVGAtPoint)(e.clientX,e.clientY)&&e.srcElement.classList.contains("annotationLayer")&&(y=document.createElement("input"),y.setAttribute("id","pdf-annotate-text-input"),y.setAttribute("placeholder","Enter text"),y.style.border="3px solid "+h.BORDER_COLOR,y.style.borderRadius="3px",y.style.position="absolute",y.style.top=e.clientY+"px",y.style.left=e.clientX+"px",y.style.fontSize=g+"px",y.style.zIndex="41",y.addEventListener("blur",i),y.addEventListener("keyup",a),document.body.appendChild(y),y.focus())}function i(){u()}function a(e){27===e.keyCode?d():13===e.keyCode&&u()}function u(){if(y.value.trim().length>0){var e=parseInt(y.style.left,10),t=parseInt(y.style.top,10),n=(0,h.findSVGAtPoint)(e,t);if(!n)return;var r=g,o=(0,h.getMetadata)(n),i=o.documentId,a=o.userId,u=o.pageNumber,s=o.viewport,c=1/s.scale,l=n.getBoundingClientRect(),f=(0,h.convertToSvgPoint)([e-l.left,t-l.top+r],n,s),m={type:"textbox",size:g*c,color:b,content:y.value.trim(),x:f[0],y:f[1],rotation:-s.rotation};p["default"].getStoreAdapter().addAnnotation(i,a,u,m).then(function(e){(0,v.appendChild)(n,e)})}d()}function d(){y&&(y.removeEventListener("blur",i),y.removeEventListener("keyup",a),document.body.removeChild(y),y=null)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";g=parseInt(e,10),b=t}function c(){m||(m=!0,document.addEventListener("mouseup",o))}function l(){m&&(m=!1,document.removeEventListener("mouseup",o))}Object.defineProperty(t,"__esModule",{value:!0}),t.setText=s,t.enableText=c,t.disableText=l;var f=n(1),p=r(f),v=n(8),h=n(6),m=!1,y=void 0,g=void 0,b=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=document.createElement("div");t.innerHTML=y;var n=t.children[0],r=n.querySelector("canvas");return n.setAttribute("id","pageContainer"+e),n.setAttribute("data-page-number",e),r.mozOpaque=!0,r.setAttribute("id","page"+e),n}function i(e,t){var n=t.documentId,r=t.userId,o=t.pdfDocument,i=t.scale,u=t.rotate;return Promise.all([o.getPage(e),f["default"].getAnnotations(n,r,e)]).then(function(t){var n=c(t,2),r=n[0],o=n[1],d=document.getElementById("pageContainer"+e),s=d.querySelector(v["default"].annotationClassQuery()),l=d.querySelector(".canvasWrapper canvas"),p=l.getContext("2d",{alpha:!1}),h=(u+r.rotate)%360,y=r.getViewport(i,h),g=a(e,y,p);return Promise.all([r.render({canvasContext:p,viewport:y,transform:g}),f["default"].render(s,y,o)]).then(function(){return r.getTextContent({normalizeWhitespace:!0}).then(function(t){return new Promise(function(n,r){var i=d.querySelector(v["default"].textClassQuery()),a=new PDFJS.DefaultTextLayerFactory,u=a.createTextLayerBuilder(i,e-1,y);u.setTextContent(t),u.render(),setTimeout(function(){try{(0,m["default"])(o.annotations),n()}catch(e){r(e)}})})})}).then(function(){return d.setAttribute("data-loaded","true"),[r,o]})})}function a(e,t,n){var r=document.getElementById("pageContainer"+e),o=r.querySelector(".canvasWrapper canvas"),i=r.querySelector(v["default"].annotationClassQuery()),a=r.querySelector(".canvasWrapper"),c=r.querySelector(v["default"].textClassQuery()),l=d(n),f=l.scaled?[l.sx,0,0,l.sy,0,0]:null,p=u(l.sx),h=u(l.sy);return r.style.visibility="",o.width=s(t.width*l.sx,p[0]),o.height=s(t.height*l.sy,h[0]),o.style.width=s(t.width,p[1])+"px",o.style.height=s(t.height,p[1])+"px",i.setAttribute("width",t.width),i.setAttribute("height",t.height),i.style.width=t.width+"px",i.style.height=t.height+"px",r.style.width=t.width+"px",r.style.height=t.height+"px",a.style.width=t.width+"px",a.style.height=t.height+"px",c.style.width=t.width+"px",c.style.height=t.height+"px",f}function u(e){if(Math.floor(e)===e)return[e,1];var t=1/e,n=8;if(t>n)return[1,n];if(Math.floor(t)===t)return[1,t];for(var r=e>1?t:e,o=0,i=1,a=1,u=1;;){var d=o+a,s=i+u;if(s>n)break;r<=d/s?(a=d,u=s):(o=d,i=s)}return r-o/i<a/u-r?r===e?[o,i]:[i,o]:r===e?[a,u]:[u,a]}function d(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,r=t/n;return{sx:r,sy:r,scaled:1!==r}}function s(e,t){var n=e%t;return 0===n?e:Math.round(e-n+t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(d){o=!0,i=d}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.createPage=o,t.renderPage=i;var l=n(1),f=r(l),p=n(27),v=r(p),h=n(23),m=r(h),y='\n  <div style="visibility: hidden;" class="page" data-loaded="false">\n    <div class="canvasWrapper">\n      <canvas></canvas>\n    </div>\n    <div class="'+v["default"].textLayerName+'"></div>\n    <svg class="'+v["default"].annotationLayerName+'"></svg>\n  </div>\n'}])});
//# sourceMappingURL=pdf-annotate.min.js.map